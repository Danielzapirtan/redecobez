<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3D Room View from Sketch</title>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
        #info { position: absolute; top: 10px; left: 10px; color: white; z-index: 100; }
    </style>
</head>
<body>
    <div id="info">Drag to orbit | Scroll to zoom | Right-drag to pan</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        // Scene setup
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xf0f0f0);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document.body.appendChild(renderer.domElement);

        // Controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.minDistance = 1;
        controls.maxDistance = 10;

        // Room dimensions (units = meters)
        const roomWidth = 3.2;
        const roomDepth = 2.5;
        const roomHeight = 2.5;

        // Floor
        const floorGeometry = new THREE.PlaneGeometry(roomWidth, roomDepth);
        const floorMaterial = new THREE.MeshLambertMaterial({ color: 0xeeeeee });
        const floor = new THREE.Mesh(floorGeometry, floorMaterial);
        floor.rotation.x = -Math.PI / 2;
        floor.receiveShadow = true;
        scene.add(floor);

        // Walls (simplified, without front for view)
        const wallMaterial = new THREE.MeshLambertMaterial({ color: 0xf5f5f5 });
        // Back wall
        const backWall = new THREE.Mesh(new THREE.PlaneGeometry(roomWidth, roomHeight), wallMaterial);
        backWall.position.set(0, roomHeight/2, -roomDepth/2);
        backWall.receiveShadow = true;
        scene.add(backWall);
        // Left wall
        const leftWall = new THREE.Mesh(new THREE.PlaneGeometry(roomDepth, roomHeight), wallMaterial);
        leftWall.rotation.y = Math.PI / 2;
        leftWall.position.set(-roomWidth/2, roomHeight/2, 0);
        leftWall.receiveShadow = true;
        scene.add(leftWall);
        // Right wall
        const rightWall = new THREE.Mesh(new THREE.PlaneGeometry(roomDepth, roomHeight), wallMaterial);
        rightWall.rotation.y = -Math.PI / 2;
        rightWall.position.set(roomWidth/2, roomHeight/2, 0);
        rightWall.receiveShadow = true;
        scene.add(rightWall);
        // Ceiling
        const ceilingGeometry = new THREE.PlaneGeometry(roomWidth, roomDepth);
        const ceilingMaterial = new THREE.MeshLambertMaterial({ color: 0xffffff });
        const ceiling = new THREE.Mesh(ceilingGeometry, ceilingMaterial);
        ceiling.rotation.x = Math.PI / 2;
        ceiling.position.y = roomHeight;
        scene.add(ceiling);

        // Door (top-left, on back wall)
        const doorGeometry = new THREE.PlaneGeometry(0.9, 2.0);
        const doorMaterial = new THREE.MeshLambertMaterial({ color: 0x8B4513 });
        const door = new THREE.Mesh(doorGeometry, doorMaterial);
        door.position.set(-1.0, 1.0, -roomDepth/2 + 0.01);
        scene.add(door);

        // Window (top-right, on back wall)
        const windowGeometry = new THREE.PlaneGeometry(1.5, 1.2);
        const windowMaterial = new THREE.MeshLambertMaterial({ color: 0x87CEEB, transparent: true, opacity: 0.3 });
        const window = new THREE.Mesh(windowGeometry, windowMaterial);
        window.position.set(0.75, 0.6, -roomDepth/2 + 0.01);
        scene.add(window);

        // Furniture
        // Desk (bottom-left)
        const deskGeometry = new THREE.BoxGeometry(1.5, 0.75, 0.6);
        const deskMaterial = new THREE.MeshLambertMaterial({ color: 0x8B4513 });
        const desk = new THREE.Mesh(deskGeometry, deskMaterial);
        desk.position.set(-1.2, 0.375, -0.5);
        desk.castShadow = true;
        desk.receiveShadow = true;
        scene.add(desk);

        // Monitor
        const monitorGeometry = new THREE.BoxGeometry(0.6, 0.4, 0.1);
        const monitorMaterial = new THREE.MeshLambertMaterial({ color: 0x222222 });
        const monitor = new THREE.Mesh(monitorGeometry, monitorMaterial);
        monitor.position.set(-1.2, 1.0, -0.75);
        monitor.castShadow = true;
        scene.add(monitor);

        // PC tower
        const pcGeometry = new THREE.BoxGeometry(0.4, 0.5, 0.4);
        const pcMaterial = new THREE.MeshLambertMaterial({ color: 0x333333 });
        const pc = new THREE.Mesh(pcGeometry, pcMaterial);
        pc.position.set(-1.5, 0.25, -0.5);
        pc.castShadow = true;
        scene.add(pc);

        // Plant (cylinder for stem + sphere for foliage)
        const plantStem = new THREE.Mesh(new THREE.CylinderGeometry(0.05, 0.05, 0.8), new THREE.MeshLambertMaterial({ color: 0x8B4513 }));
        plantStem.position.set(-0.3, 0.4, -0.5);
        scene.add(plantStem);
        const plantFoliage = new THREE.Mesh(new THREE.SphereGeometry(0.3), new THREE.MeshLambertMaterial({ color: 0x228B22 }));
        plantFoliage.position.set(-0.3, 0.9, -0.5);
        scene.add(plantFoliage);

        // Wardrobe (left wall)
        const wardrobeGeometry = new THREE.BoxGeometry(0.6, 2.0, 1.0);
        const wardrobeMaterial = new THREE.MeshLambertMaterial({ color: 0xDEB887 });
        const wardrobe = new THREE.Mesh(wardrobeGeometry, wardrobeMaterial);
        wardrobe.position.set(-roomWidth/2 + 0.3, 1.0, 0);
        wardrobe.castShadow = true;
        wardrobe.receiveShadow = true;
        scene.add(wardrobe);

        // Sofa (bottom-right)
        const sofaGeometry = new THREE.BoxGeometry(1.8, 0.8, 0.7);
        const sofaMaterial = new THREE.MeshLambertMaterial({ color: 0x4B0082 });
        const sofa = new THREE.Mesh(sofaGeometry, sofaMaterial);
        sofa.position.set(0.9, 0.4, -0.9);
        sofa.castShadow = true;
        sofa.receiveShadow = true;
        scene.add(sofa);

        // Chair (near desk)
        const chairGeometry = new THREE.BoxGeometry(0.5, 0.9, 0.5);
        const chairMaterial = new THREE.MeshLambertMaterial({ color: 0xA0522D });
        const chair = new THREE.Mesh(chairGeometry, chairMaterial);
        chair.position.set(-1.2, 0.45, 0.0);
        chair.castShadow = true;
        scene.add(chair);

        // Lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(0, roomHeight + 1, 0);
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 2048;
        directionalLight.shadow.mapSize.height = 2048;
        scene.add(directionalLight);

        // Initial camera
        camera.position.set(0, 1.5, 4);

        // Animate
        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // Resize handler
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>